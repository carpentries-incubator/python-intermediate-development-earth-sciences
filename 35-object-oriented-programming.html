<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Intermediate Research Software Development: 3.5 Object Oriented Programming</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png"><link rel="manifest" href="favicons/incubator/site.webmanifest"><link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#polishing-beta-stage" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/35-object-oriented-programming.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Intermediate Research Software Development
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Intermediate Research Software Development
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="installation-instructions.html"></a></li><li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Intermediate Research Software Development
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 62%" class="percentage">
    62%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 62%" aria-valuenow="62" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/35-object-oriented-programming.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="00-setting-the-scene.html">1. Setting the Scene</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="10-section1-intro.html">2. Section 1: Setting Up Environment For Collaborative Code Development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="11-software-project.html">3. 1.1 Introduction to Our Software Project</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="12-virtual-environments.html">4. 1.2 Virtual Environments For Software Development</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="13-ides.html">5. 1.3 Integrated Software Development Environments</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="14-collaboration-using-git.html">6. 1.4 Collaborative Software Development Using Git and GitHub</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="15-coding-conventions.html">7. 1.5 Python Code Style Conventions</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="16-verifying-code-style-linters.html">8. 1.6 Verifying Code Style Using Linters</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="20-section2-intro.html">9. Section 2: Ensuring Correctness of Software at Scale</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="21-automatically-testing-software.html">10. 2.1 Automatically Testing Software</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush12">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading12">
        <a href="22-scaling-up-unit-testing.html">11. 2.2 Scaling Up Unit Testing</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush13">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading13">
        <a href="23-continuous-integration-automated-testing.html">12. 2.3 Continuous Integration for Automated Testing</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush14">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading14">
        <a href="24-diagnosing-issues-improving-robustness.html">13. 2.4 Diagnosing Issues and Improving Robustness</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush15">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading15">
        <a href="30-section3-intro.html">14. Section 3: Software Development as a Process</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush16">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading16">
        <a href="31-software-requirements.html">15. 3.1 Software Requirements</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush17">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading17">
        <a href="32-software-design.html">16. 3.2 Software Architecture and Design</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush18">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading18">
        <a href="33-programming-paradigms.html">17. 3.3 Programming Paradigms</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush19">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading19">
        <a href="34-functional-programming.html">18. 3.4 Functional Programming</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        19. 3.5 Object Oriented Programming
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introduction">Introduction</a></li>
<li><a href="#structuring-data">Structuring Data</a></li>
<li><a href="#classes-in-python">Classes in Python</a></li>
<li><a href="#encapsulating-data">Encapsulating Data</a></li>
<li><a href="#encapsulating-behaviour">Encapsulating Behaviour</a></li>
<li><a href="#relationships-between-classes">Relationships Between Classes</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush21">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading21">
        <a href="36-architecture-revisited.html">20. 3.6 Architecture Revisited: Extending Software</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush22">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading22">
        <a href="40-section4-intro.html">21. Section 4: Collaborative Software Development for Reuse</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush23">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading23">
        <a href="41-code-review.html">22. 4.1 Developing Software In a Team: Code Review</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush24">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading24">
        <a href="42-software-reuse.html">23. 4.2 Preparing Software for Reuse and Release</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush25">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading25">
        <a href="43-software-release.html">24. 4.3 Packaging Code for Release and Distribution</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush26">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading26">
        <a href="50-section5-intro.html">25. Section 5: Managing and Improving Software Over Its Lifetime</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush27">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading27">
        <a href="51-managing-software.html">26. 5.1 Managing a Collaborative Software Project</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush28">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading28">
        <a href="52-assessing-software-suitability-improvement.html">27. 5.2 Assessing Software for Suitability and Improvement</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush29">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading29">
        <a href="53-improvement-through-feedback.html">28. 5.3 Software Improvement Through Feedback</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush30">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading30">
        <a href="60-wrap-up.html">29. Wrap-up</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="installation-instructions.html"></a></li><li><a href="reference.html">Glossary</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="34-functional-programming.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="36-architecture-revisited.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="34-functional-programming.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: 3.4 Functional
        </a>
        <a class="chapter-link float-end" href="36-architecture-revisited.html" rel="next">
          Next: 3.6 Architecture...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>3.5 Object Oriented Programming</h1>
        <p>Last updated on 2024-11-25 |

        <a href="https://github.com/carpentries-incubator/python-intermediate-development-earth-sciences/edit/main/episodes/35-object-oriented-programming.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can we use code to describe the structure of data?</li>
<li>How should the relationships between structures be described?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Describe the core concepts that define the object oriented
paradigm</li>
<li>Use classes to encapsulate data within a more complex program</li>
<li>Structure concepts within a program in terms of sets of
behaviour</li>
<li>Identify different types of relationship between concepts within a
program</li>
<li>Structure data within a program using these relationships</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a></h2>
<hr class="half-width"><p>Object oriented programming is a programming paradigm based on the
concept of objects, which are data structures that contain (encapsulate)
data and code. Data is encapsulated in the form of fields (attributes)
of objects, while code is encapsulated in the form of procedures
(methods) that manipulate objects’ attributes and define “behaviour” of
objects. So, in object oriented programming, we first think about the
data and the things that we’re modelling - and represent these by
objects - rather than define the logic of the program, and code becomes
a series of interactions between objects.</p>
</section><section><h2 class="section-heading" id="structuring-data">Structuring Data<a class="anchor" aria-label="anchor" href="#structuring-data"></a></h2>
<hr class="half-width"><p>One of the main difficulties we encounter when building more complex
software is how to structure our data. So far, we’ve been processing
data from a single source and with a simple tabular structure, but it
would be useful to be able to combine data from a range of different
sources and with more data than just an array of numbers.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame([[<span class="fl">1.</span>, <span class="fl">2.</span>, <span class="fl">3.</span>], [<span class="fl">4.</span>, <span class="fl">5.</span>, <span class="fl">6.</span>]],</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                     index<span class="op">=</span>[<span class="st">'FP35'</span>,<span class="st">'FP56'</span>])</span></code></pre>
</div>
<p>Using this data structure has the advantage of being able to use
Pandas and NumPy operations to process the data, and Matplotlib to plot
it, but often we need to have more structure than this. For example, the
measurement data we are interested in has a hierarchy of situational
information: each data set is recorded by a particular instrument, in a
particular measurement site, in a particular catchment area. This
structure can be captured using Pandas MultiIndexes, for example:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>location_measurement <span class="op">=</span> [</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    (<span class="st">"FP"</span>, <span class="st">"FP35"</span>, <span class="st">"Rainfall"</span>),</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    (<span class="st">"FP"</span>, <span class="st">"FP56"</span>, <span class="st">"River Level"</span>),</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    (<span class="st">"PL"</span>, <span class="st">"PL23"</span>, <span class="st">"River Level"</span>),</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    (<span class="st">"PL"</span>, <span class="st">"PL23"</span>, <span class="st">"Water pH"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>]</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>index_names <span class="op">=</span> [<span class="st">"Catchment"</span>, <span class="st">"Site"</span>, <span class="st">"Measurement"</span>]</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>index <span class="op">=</span> pd.MultiIndex.from_tuples(location_measurement,names<span class="op">=</span>index_names)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>data <span class="op">=</span> [</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    [<span class="fl">0.</span>, <span class="fl">2.</span>, <span class="fl">1.</span>],</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    [<span class="fl">30.</span>, <span class="fl">29.</span>, <span class="fl">34.</span>],</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    [<span class="fl">34.</span>, <span class="fl">32.</span>, <span class="fl">33.</span>],</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>    [<span class="fl">7.8</span>, <span class="fl">8.</span>, <span class="fl">7.9</span>]</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>]</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>pd.DataFrame(data,index<span class="op">=</span>index)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>                               0     1     2
Catchment Site Measurement
FP        FP35 Rainfall      0.0   2.0   1.0
          FP56 River Level  30.0  29.0  34.0
PL        PL23 River Level  34.0  32.0  33.0
               Water pH      7.8   8.0   7.9</code></pre>
</div>
<p>However, we may need to attach more information about the sites and
store this alongside our measurement data. Or we might want to store the
data from different sites or instruments at different frequencies. These
requirements are more difficult to accomodate within a Pandas DataFrame,
and would require the use of extra data structures, or lead to messy
data frames.</p>
<p>Instead, we can do this using the Python data structures we’re
already familiar with, dictionaries and lists. For instance, we could
attach an identifier to the measurements from each site:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>measurement_data <span class="op">=</span> [</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>    {</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>        <span class="st">'site'</span>: <span class="st">'FP35'</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>        <span class="st">'measurement'</span>: <span class="st">'Rainfall'</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>        <span class="st">'data'</span>: [<span class="fl">0.0</span>, <span class="fl">2.0</span>, <span class="fl">1.0</span>],</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    },</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    {</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>        <span class="st">'site'</span>: <span class="st">'FP56'</span>,</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>        <span class="st">'measurement'</span>: <span class="st">'River level'</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>        <span class="st">'data'</span>: [<span class="fl">30.0</span>, <span class="fl">29.0</span>, <span class="fl">34.0</span>],</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>    },</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>]</span></code></pre>
</div>
<div id="structuring-data-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="structuring-data-1" class="callout-inner">
<h3 class="callout-title">Structuring Data</h3>
<div class="callout-content">
<p>Write a function, called <code>attach_sites</code>, which can be used
to attach IDs to our measurement dataset. When used as below, it should
produce the expected output.</p>
<p>If you’re not sure where to begin, think about ways you might be able
to effectively loop over two collections at once. Also, don’t worry too
much about the data type of the <code>data</code> value, it can be a
Python list, a NumPy array, or a Pandas DataFrame - any is fine.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>data <span class="op">=</span> np.array([[<span class="fl">34.</span>, <span class="fl">32.</span>, <span class="fl">33.</span>],</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>                 [<span class="fl">7.8</span>, <span class="fl">8.0</span>, <span class="fl">7.9</span>]])</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>output <span class="op">=</span> attach_information(data, [<span class="st">'PL23'</span>, <span class="st">'PL23'</span>], [<span class="st">'River Level'</span>, <span class="st">'pH'</span>])</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="bu">print</span>(output)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[
    {
        'site': 'PL23',
        'measurement': 'River Level',
        'data': [34., 32., 33.],
    },
    {
        'site': 'PL23',
        'measurement': 'pH',
        'data': [7.8, 8.0, 7.9],
    },
]</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>One possible solution, perhaps the most obvious, is to use the
<code>range</code> function to index into all three lists at the same
location:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">def</span> attach_information(data, sites, measurements):</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>    <span class="co">"""Create datastructure containing data from a range of sites</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">       and instruments."""</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(data)):</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>        output.append({<span class="st">'site'</span>: sites[i],</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>                       <span class="st">'measurement'</span>: measurements[i],</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>                       <span class="st">'data'</span>: data[i]})</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>    <span class="cf">return</span> output</span></code></pre>
</div>
<p>However, this solution has a potential problem that can occur
sometimes, depending on the input. What might go wrong with this
solution? How could we fix it?</p>
<div class="section level3">
<h3 id="a-better-solution">A Better Solution<a class="anchor" aria-label="anchor" href="#a-better-solution"></a></h3>
<p>What would happen if the <code>data</code>,
<code>measurements</code>, and/or <code>sites</code> inputs were
different lengths?</p>
<p>If <code>sites</code> or <code>measurements</code> is longer, we’ll
loop through, until we run out of rows in the <code>data</code> input,
at which point we’ll stop processing the last few names. If
<code>data</code> is longer, we’ll loop through, but at some point we’ll
run out of sites or measurements - but this time we try to access part
of the list that doesn’t exist, so we’ll get an exception.</p>
<p>A better solution would be to use the <code>zip</code> function,
which allows us to iterate over multiple iterables without needing an
index variable. The <code>zip</code> function also limits the iteration
to whichever of the iterables is smaller, so we won’t raise an exception
here, but this might not quite be the behaviour we want, so we’ll also
explicitly <code>assert</code> that the inputs should be the same
length. Checking that our inputs are valid in this way is an example of
a precondition, which we introduced conceptually in an earlier
episode.</p>
<p>If you’ve not previously come across the <code>zip</code> function,
read <a href="https://docs.python.org/3/library/functions.html#zip" class="external-link">this
section</a> of the Python documentation.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">def</span> attach_names(data, sites, measurements):</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>    <span class="co">"""Create datastructure containing measurement data from a range of sites."""</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(data) <span class="op">==</span> <span class="bu">len</span>(sites)</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(data) <span class="op">==</span> <span class="bu">len</span>(measurements)</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    output <span class="op">=</span> []</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="cf">for</span> data_row, measurement, site <span class="kw">in</span> <span class="bu">zip</span>(data, measurements, sites):</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>        output.append({<span class="st">'site'</span>: site,</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>                       <span class="st">'measurement'</span>: measurement,</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a>                       <span class="st">'data'</span>: data_row})</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>    <span class="cf">return</span> output</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="classes-in-python">Classes in Python<a class="anchor" aria-label="anchor" href="#classes-in-python"></a></h2>
<hr class="half-width"><p>Using nested dictionaries and lists should work for some of the
simpler cases where we need to handle structured data, but they get
quite difficult to manage once the structure becomes a bit more complex.
For this reason, in the object oriented paradigm, we use
<strong>classes</strong> to help with managing this data and the
operations we would want to perform on it. A class is a
<strong>template</strong> (blueprint) for a structured piece of data, so
when we create some data using a class, we can be certain that it has
the same structure each time.</p>
<p>With our list of dictionaries we had in the example above, we have no
real guarantee that each dictionary has the same structure, e.g. the
same keys (<code>site</code> and <code>data</code>) unless we check it
manually. With a class, if an object is an <strong>instance</strong> of
that class (i.e. it was made using that template) we know it will have
the structure defined by that class. Different programming languages
make slightly different guarantees about how strictly the structure will
match, but in object oriented programming this is one of the core ideas
- all objects derived from the same class must follow the same
behaviour.</p>
<p>You may not have realised, but you should already be familiar with
some of the classes that come bundled as part of Python, for
example:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>my_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>my_dict <span class="op">=</span> {<span class="dv">1</span>: <span class="st">'1'</span>, <span class="dv">2</span>: <span class="st">'2'</span>, <span class="dv">3</span>: <span class="st">'3'</span>}</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>my_set <span class="op">=</span> {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>}</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(my_list))</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(my_dict))</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(my_set))</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'list'&gt;
&lt;class 'dict'&gt;
&lt;class 'set'&gt;</code></pre>
</div>
<p>Lists, dictionaries and sets are a slightly special type of class,
but they behave in much the same way as a class we might define
ourselves:</p>
<ul><li>They each hold some data (<strong>attributes</strong> or
<strong>state</strong>).</li>
<li>They also provide some methods describing the behaviours of the data
- what can the data do and what can we do to the data?</li>
</ul><p>The behaviours we may have seen previously include:</p>
<ul><li>Lists can be appended to</li>
<li>Lists can be indexed</li>
<li>Lists can be sliced</li>
<li>Key-value pairs can be added to dictionaries</li>
<li>The value at a key can be looked up in a dictionary</li>
<li>The union of two sets can be found (the set of values present in any
of the sets)</li>
<li>The intersection of two sets can be found (the set of values present
in all of the sets)</li>
</ul></section><section><h2 class="section-heading" id="encapsulating-data">Encapsulating Data<a class="anchor" aria-label="anchor" href="#encapsulating-data"></a></h2>
<hr class="half-width"><p>Let’s start with a minimal example of a class representing a
measurement site.</p>
<p>```python, python # file: catchment/models.py</p>
<p>class Site: def <strong>init</strong>(self, name): self.name = name
self.measurements = {}</p>
<pre><code>
```python
from catchment.models import Site

FP35 = Site('FP35')
print(FP35.name)</code></pre>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">FP35</span></span></code></pre>
</div>
<p>Here we’ve defined a class with one method: <code>__init__</code>.
This method is the <strong>initialiser</strong> method, which is
responsible for setting up the initial values and structure of the data
inside a new instance of the class - this is very similar to
<strong>constructors</strong> in other languages, so the term is often
used in Python too. The <code>__init__</code> method is called every
time we create a new instance of the class, as in
<code>Site('FP35')</code>. The argument <code>self</code> refers to the
instance on which we are calling the method and gets filled in
automatically by Python - we don’t need to provide a value for this when
we call the method.</p>
<p>Data encapsulated within our Site class includes the name of the site
and a dictionary of measurement datasets. In the initialiser method, we
set a site’s name to the value provided, and create a dictionary of
measurement datasets for the site (initially empty). Such data is also
referred to as the attributes of a class and holds the current state of
an instance of the class. Attributes are typically hidden (encapsulated)
internal object details ensuring that access to data is protected from
unintended changes. They are manipulated internally by the class, which,
in addition, can expose certain functionality as public behavior of the
class to allow other objects to interact with this class’ instances.</p>
</section><section><h2 class="section-heading" id="encapsulating-behaviour">Encapsulating Behaviour<a class="anchor" aria-label="anchor" href="#encapsulating-behaviour"></a></h2>
<hr class="half-width"><p>In addition to representing a piece of structured data (e.g. a site
which has a name and a dictionary of measurement data), a class can also
provide a set of functions, or <strong>methods</strong>, which describe
the <strong>behaviours</strong> of the data encapsulated in the
instances of that class. To define the behaviour of a class we add
functions which operate on the data the class contains. These functions
are the member functions or methods.</p>
<p>Methods on classes are the same as normal functions, except that they
live inside a class and have an extra first parameter <code>self</code>.
Using the name <code>self</code> is not strictly necessary, but is a
very strong convention - it is extremely rare to see any other name
chosen. When we call a method on an object, the value of
<code>self</code> is automatically set to this object - hence the name.
As we saw with the <code>__init__</code> method previously, we do not
need to explicitly provide a value for the <code>self</code> argument,
this is done for us by Python.</p>
<p>Let’s add another method on our Site class that adds a new
measurement dataset to a Site instance.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># file: catchment/models.py</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="kw">class</span> Site:</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="co">"""A measurement site in the study."""</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name):</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>        <span class="va">self</span>.measurements <span class="op">=</span> {}</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>    <span class="kw">def</span> add_measurement(<span class="va">self</span>, measurement_id, data):</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>        <span class="cf">if</span> measurement_id <span class="kw">in</span> <span class="va">self</span>.measurements.keys():</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id] <span class="op">=</span> <span class="op">\</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>                    pd.concat([<span class="va">self</span>.measurements[measurement_id], data])</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>        </span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id] <span class="op">=</span> data</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id].name <span class="op">=</span> measurement_id</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="im">from</span> catchment.models <span class="im">import</span> Site</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>FP35 <span class="op">=</span> Site(<span class="st">'FP35'</span>)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="bu">print</span>(FP35)</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>rainfall_data <span class="op">=</span> pd.Series(</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    [<span class="fl">0.0</span>,<span class="fl">2.0</span>,<span class="fl">1.0</span>],</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>    index<span class="op">=</span>[</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>        ]</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>    )</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>FP35.add_measurement(<span class="st">'Rainfall'</span>,rainfall_data)</span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="bu">print</span>(FP35.measurements.keys())</span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="bu">print</span>(FP35.measurements[<span class="st">'Rainfall'</span>])</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;__main__.Site object at 0x7fada93d0820&gt;
dict_keys(['Rainfall'])
2000-01-01  0.0
2000-01-02  2.0
2000-01-03  1.0
Name: Rainfall, dtype: float64</code></pre>
</div>
<p>Note here that we have created a <code>pandas.Series</code> object,
rather than a <code>pandas.DataFrame</code> object, to contain our
measurement data, and that we are setting the <code>name</code> of each
series to match the <code>measurement_id</code>. DataFrames can be
considered to be a collection of series, each containing separate data.
Our <code>Site</code> object replaces the dataframe for this purpose,
later we will show you how to combine the series objects into dataframes
again, using the series <code>name</code> that we set here.</p>
<div id="class-and-static-methods" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="class-and-static-methods" class="callout-inner">
<h3 class="callout-title">Class and Static Methods</h3>
<div class="callout-content">
<p>Sometimes, the function we’re writing doesn’t need access to any data
belonging to a particular object. For these situations, we can instead
use a <strong>class method</strong> or a <strong>static method</strong>.
Class methods have access to the class that they’re a part of, and can
access data on that class - but do not belong to a specific instance of
that class, whereas static methods have access to neither the class nor
its instances.</p>
<p>By convention, class methods use <code>cls</code> as their first
argument instead of <code>self</code> - this is how we access the class
and its data, just like <code>self</code> allows us to access the
instance and its data. Static methods have neither <code>self</code> nor
<code>cls</code> so the arguments look like a typical free function.
These are the only common exceptions to using <code>self</code> for a
method’s first argument.</p>
<p>Both of these method types are created using
<strong>decorators</strong> - for more information see the <a href="https://docs.python.org/3/library/functions.html#classmethod" class="external-link">classmethod</a>
and <a href="https://docs.python.org/3/library/functions.html#staticmethod" class="external-link">staticmethod</a>
decorator sections of the Python documentation.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="dunder-methods">Dunder Methods<a class="anchor" aria-label="anchor" href="#dunder-methods"></a></h3>
<p>Why is the <code>__init__</code> method not called <code>init</code>?
There are a few special method names that we can use which Python will
use to provide a few common behaviours, each of which begins and ends
with a <strong>d</strong>ouble-<strong>under</strong>score, hence the
name <strong>dunder method</strong>.</p>
<p>When writing your own Python classes, you’ll almost always want to
write an <code>__init__</code> method, but there are a few other common
ones you might need sometimes. You may have noticed in the code above
that the method <code>print(FP35)</code> returned
<code>&lt;__main__.Site object at 0x7fada93d0820&gt;</code>, which is
the string represenation of the <code>FP35</code> object. We may want
the print statement to display the object’s name instead. We can achieve
this by overriding the <code>__str__</code> method of our class.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># file: catchment/models.py</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="kw">class</span> Site:</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>    <span class="co">"""A measurement site in the study."""</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, name):</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>        <span class="va">self</span>.measurements <span class="op">=</span> {}</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>    <span class="kw">def</span> add_measurement(<span class="va">self</span>, measurement_id, data):</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>        <span class="cf">if</span> measurement_id <span class="kw">in</span> <span class="va">self</span>.measurements.keys():</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id] <span class="op">=</span> <span class="op">\</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>                    pd.concat([<span class="va">self</span>.measurements[measurement_id], data])</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a>        </span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id] <span class="op">=</span> data</span>
<span id="cb16-16"><a href="#cb16-16" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id].name <span class="op">=</span> measurement_id</span>
<span id="cb16-17"><a href="#cb16-17" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb16-19"><a href="#cb16-19" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.name</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="im">from</span> catchment.models <span class="im">import</span> Site</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>FP35 <span class="op">=</span> Site(<span class="st">'FP35'</span>)</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="bu">print</span>(FP35)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">FP35</span></span></code></pre>
</div>
<p>These dunder methods are not usually called directly, but rather
provide the implementation of some functionality we can use - we didn’t
call <code>FP35.__str__()</code>, but it was called for us when we did
<code>print(FP35)</code>. Some we see quite commonly are:</p>
<ul><li>
<code>__str__</code> - converts an object into its string
representation, used when you call <code>str(object)</code> or
<code>print(object)</code>
</li>
<li>
<code>__getitem__</code> - Accesses an object by key, this is how
<code>list[x]</code> and <code>dict[x]</code> are implemented</li>
<li>
<code>__len__</code> - gets the length of an object when we use
<code>len(object)</code> - usually the number of items it contains</li>
</ul><p>There are many more described in the Python documentation, but it’s
also worth experimenting with built in Python objects to see which
methods provide which behaviour. For a more complete list of these
special methods, see the <a href="https://docs.python.org/3/reference/datamodel.html#special-method-names" class="external-link">Special
Method Names</a> section of the Python documentation.</p>
<div id="a-basic-class" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="a-basic-class" class="callout-inner">
<h3 class="callout-title">A Basic Class</h3>
<div class="callout-content">
<p>Implement a class to represent a book. Your class should:</p>
<ul><li>Have a title</li>
<li>Have an author</li>
<li>When printed using <code>print(book)</code>, show text in the format
“title by author”</li>
</ul><div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>book <span class="op">=</span> Book(<span class="st">'A Book'</span>, <span class="st">'Me'</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="bu">print</span>(book)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>A Book by Me</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">class</span> Book:</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, title, author):</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>        <span class="va">self</span>.title <span class="op">=</span> title</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>        <span class="va">self</span>.author <span class="op">=</span> author</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.title <span class="op">+</span> <span class="st">' by '</span> <span class="op">+</span> <span class="va">self</span>.author</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="properties">Properties<a class="anchor" aria-label="anchor" href="#properties"></a></h3>
<p>The final special type of method we will introduce is a
<strong>property</strong>. Properties are methods which behave like data
- when we want to access them, we do not need to use brackets to call
the method manually.</p>
<p>For example, we will add a method which will return the last data
point in each measurement series, combined into a single dataframe:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># file: catchment/models.py</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="kw">class</span> Site:</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>    ...</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>    <span class="kw">def</span> last_measurements(<span class="va">self</span>):</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>        <span class="cf">return</span> pd.concat(</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>            [<span class="va">self</span>.measurements[key].series[<span class="op">-</span><span class="dv">1</span>:] <span class="cf">for</span> key <span class="kw">in</span> <span class="va">self</span>.measurements.keys()],</span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>            axis<span class="op">=</span><span class="dv">1</span>).sort_index()</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="im">from</span> catchment.models <span class="im">import</span> Site</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>PL23 <span class="op">=</span> Site(<span class="st">'PL23'</span>)</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>riverlevel_data <span class="op">=</span> pd.Series(</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>    [<span class="fl">34.0</span>,<span class="fl">32.0</span>,<span class="fl">33.0</span>,<span class="fl">31.0</span>],</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>    index<span class="op">=</span>[</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">4</span>),</span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>        ]</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>    )</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a>waterph_data <span class="op">=</span> pd.Series(</span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>    [<span class="fl">7.8</span>,<span class="fl">8.0</span>,<span class="fl">7.9</span>],</span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>    index<span class="op">=</span>[</span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a>        ]</span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a>    )</span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a>PL23.add_measurement(<span class="st">'River Level'</span>, riverlevel_data)</span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a>PL23.add_measurement(<span class="st">'Water pH'</span>, waterph_data)</span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a></span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a>lastdata <span class="op">=</span> PL23.last_measurements</span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a><span class="bu">print</span>(lastdata)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>            River Level  Water pH
2000-01-03          NaN       7.9
2000-01-04         31.0       NaN</code></pre>
</div>
<p>You may recognise the <code>@</code> syntax from episodes on
parameterising unit tests and functional programming -
<code>property</code> is another example of a
<strong>decorator</strong>. In this case the <code>property</code>
decorator is taking the <code>last_measurements</code> function and
modifying its behaviour, so it can be accessed as if it were a normal
attribute. It is also possible to make your own decorators, but we won’t
cover it here.</p>
</div>
</section><section><h2 class="section-heading" id="relationships-between-classes">Relationships Between Classes<a class="anchor" aria-label="anchor" href="#relationships-between-classes"></a></h2>
<hr class="half-width"><p>We now have a language construct for grouping data and behaviour
related to a single conceptual object. The next step we need to take is
to describe the relationships between the concepts in our code.</p>
<p>There are two fundamental types of relationship between objects which
we need to be able to describe:</p>
<ol style="list-style-type: decimal"><li>Ownership - x <strong>has a</strong> y - this is
<strong>composition</strong>
</li>
<li>Identity - x <strong>is a</strong> y - this is
<strong>inheritance</strong>
</li>
</ol><div class="section level3">
<h3 id="composition">Composition<a class="anchor" aria-label="anchor" href="#composition"></a></h3>
<p>You should hopefully have come across the term
<strong>composition</strong> already - in the novice Software Carpentry,
we use composition of functions to reduce code duplication. That time,
we used a function which converted temperatures in Celsius to Kelvin as
a <strong>component</strong> of another function which converted
temperatures in Fahrenheit to Kelvin.</p>
<p>In the same way, in object oriented programming, we can make things
components of other things.</p>
<p>We often use composition where we can say ‘x <em>has a</em> y’ - for
example in our catchment study project, we might want to say that a
catchment area <em>has</em> measurement sites or that a measurement site
<em>has</em> a collection of measurement sets.</p>
<p>In the case of our example, we have said any given measurement site
has a collection of measurement sets, so we’re already using composition
here. We’re currently implementing the collection of measurement sets as
a dictionary with a known set of keys though, so maybe we should make a
<code>MeasurementSeries</code> class as well. This class will contain
the Pandas Series it replaces, but enable us to now associate extra
information and methods with that dataset.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># file: catchment/models.py</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="kw">class</span> MeasurementSeries:</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, series, name, units):</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>        <span class="va">self</span>.series <span class="op">=</span> series</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>        <span class="va">self</span>.units <span class="op">=</span> units</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>        <span class="va">self</span>.series.name <span class="op">=</span> <span class="va">self</span>.name</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    </span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>    <span class="kw">def</span> add_measurement(<span class="va">self</span>, data):</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>        <span class="va">self</span>.series <span class="op">=</span> pd.concat([<span class="va">self</span>.series,data])</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a>        <span class="va">self</span>.series.name <span class="op">=</span> <span class="va">self</span>.name</span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a>    </span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.units:</span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a>            <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>name<span class="sc">}</span><span class="ss"> (</span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>units<span class="sc">}</span><span class="ss">)"</span></span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">self</span>.name</span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a><span class="kw">class</span> Site:</span>
<span id="cb25-22"><a href="#cb25-22" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>,name):</span>
<span id="cb25-23"><a href="#cb25-23" tabindex="-1"></a>        <span class="va">self</span>.name <span class="op">=</span> name</span>
<span id="cb25-24"><a href="#cb25-24" tabindex="-1"></a>        <span class="va">self</span>.measurements <span class="op">=</span> {}</span>
<span id="cb25-25"><a href="#cb25-25" tabindex="-1"></a>    </span>
<span id="cb25-26"><a href="#cb25-26" tabindex="-1"></a>    <span class="kw">def</span> add_measurement(<span class="va">self</span>, measurement_id, data, units<span class="op">=</span><span class="va">None</span>):    </span>
<span id="cb25-27"><a href="#cb25-27" tabindex="-1"></a>        <span class="cf">if</span> measurement_id <span class="kw">in</span> <span class="va">self</span>.measurements.keys():</span>
<span id="cb25-28"><a href="#cb25-28" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id].add_measurement(data)</span>
<span id="cb25-29"><a href="#cb25-29" tabindex="-1"></a>        </span>
<span id="cb25-30"><a href="#cb25-30" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb25-31"><a href="#cb25-31" tabindex="-1"></a>            <span class="va">self</span>.measurements[measurement_id] <span class="op">=</span> MeasurementSeries(data, measurement_id, units)</span>
<span id="cb25-32"><a href="#cb25-32" tabindex="-1"></a>    </span>
<span id="cb25-33"><a href="#cb25-33" tabindex="-1"></a>    <span class="at">@property</span></span>
<span id="cb25-34"><a href="#cb25-34" tabindex="-1"></a>    <span class="kw">def</span> last_measurements(<span class="va">self</span>):</span>
<span id="cb25-35"><a href="#cb25-35" tabindex="-1"></a>        <span class="cf">return</span> pd.concat(</span>
<span id="cb25-36"><a href="#cb25-36" tabindex="-1"></a>            [<span class="va">self</span>.measurements[key].series[<span class="op">-</span><span class="dv">1</span>:] <span class="cf">for</span> key <span class="kw">in</span> <span class="va">self</span>.measurements.keys()],</span>
<span id="cb25-37"><a href="#cb25-37" tabindex="-1"></a>            axis<span class="op">=</span><span class="dv">1</span>).sort_index()</span>
<span id="cb25-38"><a href="#cb25-38" tabindex="-1"></a>    </span>
<span id="cb25-39"><a href="#cb25-39" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__str__</span>(<span class="va">self</span>):</span>
<span id="cb25-40"><a href="#cb25-40" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.name</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="im">from</span> catchment.models <span class="im">import</span> Site</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>PL23 <span class="op">=</span> Site(<span class="st">'PL23'</span>)</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>riverlevel_data <span class="op">=</span> pd.Series(</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>    [<span class="fl">34.0</span>,<span class="fl">32.0</span>,<span class="fl">33.0</span>,<span class="fl">31.0</span>],</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>    index<span class="op">=</span>[</span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">3</span>),</span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">4</span>),</span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a>        ]</span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a>    )</span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a></span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a>waterph_data <span class="op">=</span> pd.Series(</span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a>    [<span class="fl">7.8</span>,<span class="fl">8.0</span>,<span class="fl">7.9</span>],</span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a>    index<span class="op">=</span>[</span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a>        datetime.date(<span class="dv">2000</span>,<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a>        ]</span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a>    )</span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a>PL23.add_measurement(<span class="st">'River Level'</span>, riverlevel_data, <span class="st">'mm'</span>)</span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a>PL23.add_measurement(<span class="st">'Water pH'</span>, waterph_data)</span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="bu">print</span>(PL23.measurements[<span class="st">'River Level'</span>])</span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a><span class="bu">print</span>(PL23.measurements[<span class="st">'Water pH'</span>])</span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a></span>
<span id="cb26-32"><a href="#cb26-32" tabindex="-1"></a>lastdata <span class="op">=</span> PL23.last_measurements</span>
<span id="cb26-33"><a href="#cb26-33" tabindex="-1"></a><span class="bu">print</span>(lastdata)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>River Level (mm)
Water pH
            River Level  Water pH
2000-01-03          NaN       7.9
2000-01-04         31.0       NaN</code></pre>
</div>
<p>Note that, within the <code>Site</code> class, we now access the
measurement series by adding <code>.series</code> to the end of the
<code>self.measurements[measurement_id]</code> object.</p>
<p>Note also how we used <code>units=None</code> in the parameter list
of the <code>add_measurement</code> method, enabling us to still
initialise the <code>MeasurementSet</code> class even if the end user
doesn’t supply the measurement unit information. This is one of the
common ways to handle an optional argument in Python, so we’ll see this
pattern quite a lot in real projects.</p>
<p>Now we’re using a composition of two custom classes to describe the
relationship between two types of entity in the system that we’re
modelling.</p>
</div>
<div class="section level3">
<h3 id="inheritance">Inheritance<a class="anchor" aria-label="anchor" href="#inheritance"></a></h3>
<p>The other type of relationship used in object oriented programming is
<strong>inheritance</strong>. Inheritance is about data and behaviour
shared by classes, because they have some shared identity - ‘x <em>is
a</em> y’. If class <code>X</code> inherits from (<em>is a</em>) class
<code>Y</code>, we say that <code>Y</code> is the
<strong>superclass</strong> or <strong>parent class</strong> of
<code>X</code>, or <code>X</code> is a <strong>subclass</strong> of
<code>Y</code>.</p>
<p>If we want to extend the previous example to also manage locations
which aren’t measurement sites we can add another class
<code>Location</code>. But <code>Location</code> will share some data
and behaviour with <code>Site</code> - in this case both have a name and
show that name when you print them. Since we expect all sites to be
locations, it makes sense to implement the behaviour in
<code>Location</code> and then reuse it in <code>Site</code>.</p>
<p>To write our class in Python, we used the <code>class</code> keyword,
the name of the class, and then a block of the functions that belong to
it. If the class <strong>inherits</strong> from another class, we
include the parent class name in brackets.</p>
<p>```python, python # file: catchment/models.py</p>
<p>class MeasurementSeries: def <strong>init</strong>(self, series,
name, units): self.series = series self.name = name self.units = units
self.series.name = self.name</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">def</span> add_measurement<span class="er">(</span><span class="ex">self,</span> data<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>    <span class="ex">self.series</span> = pd.concat<span class="er">(</span><span class="ex">[self.series,data]</span><span class="kw">)</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>    <span class="ex">self.series.name</span> = self.name</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="ex">def</span> __str__<span class="er">(</span><span class="ex">self</span><span class="kw">)</span><span class="bu">:</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>    <span class="cf">if</span> <span class="ex">self.units:</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a>        <span class="cf">return</span> <span class="ex">f</span><span class="st">"{self.name} ({self.units})"</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>    <span class="ex">else:</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>        <span class="cf">return</span> <span class="ex">self.name</span></span></code></pre>
</div>
<p>class Location: def <strong>init</strong>(self, name): self.name =
name</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="ex">def</span> __str__<span class="er">(</span><span class="ex">self</span><span class="kw">)</span><span class="bu">:</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>    <span class="cf">return</span> <span class="ex">self.name</span></span></code></pre>
</div>
<p>class Site(Location): def <strong>init</strong>(self,name):
super().__init__(name) self.measurements = {}</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">SH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sh" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">def</span> add_measurement<span class="er">(</span><span class="ex">self,</span> measurement_id, data, units=None<span class="kw">)</span><span class="bu">:</span>    </span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>    <span class="cf">if</span> <span class="ex">measurement_id</span> in self.measurements.keys<span class="er">(</span><span class="kw">)</span><span class="bu">:</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>        <span class="ex">self.measurements[measurement_id].add_measurement</span><span class="er">(</span><span class="ex">data</span><span class="kw">)</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>    <span class="ex">else:</span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>        <span class="ex">self.measurements[measurement_id]</span> = MeasurementSeries<span class="er">(</span><span class="ex">data,</span> measurement_id, units<span class="kw">)</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="ex">@property</span></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a><span class="ex">def</span> last_measurements<span class="er">(</span><span class="ex">self</span><span class="kw">)</span><span class="bu">:</span></span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a>    <span class="cf">return</span> <span class="ex">pd.concat</span><span class="er">(</span></span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a>        <span class="ex">[self.measurements[key].series[-1:]</span> for key in self.measurements.keys<span class="er">(</span><span class="kw">)</span><span class="ex">],</span></span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a>        <span class="va">axis</span><span class="op">=</span>1<span class="kw">)</span><span class="fu">.sort_index()</span></span></code></pre>
</div>
<pre><code>
```python
from catchment.models import Site
import pandas as pd
import datetime

FP23 = Site('FP23')

print(FP23)

riverlevel_data = pd.Series(
    [34.0,32.0,33.0,31.0],
    index=[
        datetime.date(2000,1,1),
        datetime.date(2000,1,2),
        datetime.date(2000,1,3),
        datetime.date(2000,1,4),
        ]
    )

FP23.add_measurement('River Level',riverlevel_data,'mm')

print(FP23.measurements['River Level'].series)

PL12 = Location('PL12')
print(PL12)

PL12.add_measurement('River Level',riverlevel_data,'mm')</code></pre>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>FP23
2000-01-01  34.0
2000-01-02  32.0
2000-01-03  33.0
2000-01-04  31.0
name: River Level, dtype: float 64
PL12
...
AttributeError: 'Location' object has no attribute 'add_measurement'</code></pre>
</div>
<p>As expected, an error is thrown because we cannot add measurement
data to <code>PL12</code>, which is a Location but not a Site.</p>
<p>We see in the example above that to say that a class inherits from
another, we put the <strong>parent class</strong> (or
<strong>superclass</strong>) in brackets after the name of the
<strong>subclass</strong>.</p>
<p>There’s something else we need to add as well - Python doesn’t
automatically call the <code>__init__</code> method on the parent class
if we provide a new <code>__init__</code> for our subclass, so we’ll
need to call it ourselves. This makes sure that everything that needs to
be initialised on the parent class has been, before we need to use it.
If we don’t define a new <code>__init__</code> method for our subclass,
Python will look for one on the parent class and use it automatically.
This is true of all methods - if we call a method which doesn’t exist
directly on our class, Python will search for it among the parent
classes. The order in which it does this search is known as the
<strong>method resolution order</strong> - a little more on this in the
Multiple Inheritance callout below.</p>
<p>The line <code>super().__init__(name)</code> gets the parent class,
then calls the <code>__init__</code> method, providing the
<code>name</code> variable that <code>Location.__init__</code> requires.
This is quite a common pattern, particularly for <code>__init__</code>
methods, where we need to make sure an object is initialised as a valid
<code>X</code>, before we can initialise it as a valid <code>Y</code> -
e.g. a valid <code>Location</code> must have a name, before we can
properly initialise a <code>Site</code> model with the corresponding
measurement data.</p>
<div id="composition-vs-inheritance" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="composition-vs-inheritance" class="callout-inner">
<h3 class="callout-title">Composition vs Inheritance</h3>
<div class="callout-content">
<p>When deciding how to implement a model of a particular system, you
often have a choice of either composition or inheritance, where there is
no obviously correct choice. For example, it’s not obvious whether a
photocopier <em>is a</em> printer and <em>is a</em> scanner, or <em>has
a</em> printer and <em>has a</em> scanner.</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="kw">class</span> Machine:</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="kw">class</span> Printer(Machine):</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="kw">class</span> Scanner(Machine):</span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a><span class="kw">class</span> Copier(Printer, Scanner):</span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a>    <span class="co"># Copier `is a` Printer and `is a` Scanner</span></span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="kw">class</span> Machine:</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="kw">class</span> Printer(Machine):</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a><span class="kw">class</span> Scanner(Machine):</span>
<span id="cb34-8"><a href="#cb34-8" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb34-9"><a href="#cb34-9" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" tabindex="-1"></a><span class="kw">class</span> Copier(Machine):</span>
<span id="cb34-11"><a href="#cb34-11" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb34-12"><a href="#cb34-12" tabindex="-1"></a>        <span class="co"># Copier `has a` Printer and `has a` Scanner</span></span>
<span id="cb34-13"><a href="#cb34-13" tabindex="-1"></a>        <span class="va">self</span>.printer <span class="op">=</span> Printer()</span>
<span id="cb34-14"><a href="#cb34-14" tabindex="-1"></a>        <span class="va">self</span>.scanner <span class="op">=</span> Scanner()</span></code></pre>
</div>
<p>Both of these would be perfectly valid models and would work for most
purposes. However, unless there’s something about how you need to use
the model which would benefit from using a model based on inheritance,
it’s usually recommended to opt for <strong>composition over
inheritance</strong>. This is a common design principle in the object
oriented paradigm and is worth remembering, as it’s very common for
people to overuse inheritance once they’ve been introduced to it.</p>
<p>For much more detail on this see the <a href="https://python-patterns.guide/gang-of-four/composition-over-inheritance/" class="external-link">Python
Design Patterns guide</a>.</p>
</div>
</div>
</div>
<div id="multiple-inheritance" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="multiple-inheritance" class="callout-inner">
<h3 class="callout-title">Multiple Inheritance</h3>
<div class="callout-content">
<p><strong>Multiple Inheritance</strong> is when a class inherits from
more than one direct parent class. It exists in Python, but is often not
present in other Object Oriented languages. Although this might seem
useful, like in our inheritance-based model of the photocopier above,
it’s best to avoid it unless you’re sure it’s the right thing to do, due
to the complexity of the inheritance heirarchy. Often using multiple
inheritance is a sign you should instead be using composition - again
like the photocopier model above.</p>
</div>
</div>
</div>
<div id="exercise-a-model-site" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise-a-model-site" class="callout-inner">
<h3 class="callout-title">Exercise: A Model Site</h3>
<div class="callout-content">
<p>Let’s use what we have learnt in this episode and combine it with
what we have learnt on <a href="31-software-requirements.html">software
requirements</a> to formulate and implement a <a href="31-software-requirements.html">few new solution requirements</a>
to extend the model layer of our measurement campaign system.</p>
<p>Let’s can start with extending the system such that there must be a
<code>Catchment</code> class to hold the data representing a single
catchment, which:</p>
<ul><li>must have a <code>name</code> attribute</li>
<li>must have a dictionary of sites that are within this catchment
area.</li>
</ul><p>In addition to these, try to think of an extra feature you could add
to the models which would be useful for managing a dataset like this -
imagine we’re running a field measurement campaign, what else might we
want to know? Try using Test Driven Development for any features you
add: write the tests first, then add the feature. The tests have been
started for you in <code>tests/test_sites.py</code>, but you will
probably want to add some more.</p>
<p>Once you’ve finished the initial implementation, do you have much
duplicated code? Is there anywhere you could make better use of
composition or inheritance to improve your implementation?</p>
<p>For any extra features you’ve added, explain them and how you
implemented them to your neighbour. Would they have implemented that
feature in the same way?</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>One example solution is shown below. You may start by writing some
tests (that will initially fail), and then develop the code to satisfy
the new requirements and pass the tests.</p>
<p>```python, python # file: tests/test_sites.py<br>
“““Tests for the Site model.”“”</p>
<p>def test_create_site(): “““Check a site is created correctly given a
name.”“” from catchment.models import Site name = ‘PL23’ p =
Site(name=name) assert p.name == name</p>
<p>def test_create_catchment(): “““Check a catchment is created
correctly given a name.”“” from catchment.models import Catchment name =
‘Spain’ catchment = Catchment(name=name) assert catchment.name ==
name</p>
<p>def test_catchment_is_location(): “““Check if a catchment is a
location.”“” from catchment.models import Catchment, Location catchment
= Catchment(“Spain”) assert isinstance(catchment, Location)</p>
<p>def test_site_is_location(): “““Check if a site is a location.”“”
from catchment.models import Site, Location PL23 = Site(“PL23”) assert
isinstance(PL23, Location)</p>
<p>def test_sites_added_correctly(): “““Check sites are being added
correctly by a catchment.”“” from catchment.models import Catchment,
Site catchment = Catchment(“Spain”) PL23 = Site(“PL23”)
catchment.add_site(PL23) assert catchment.sites is not None assert
len(catchment.sites) == 1</p>
<p>def test_no_duplicate_sites(): “““Check adding the same site to the
same catchment twice does not result in duplicates.”“” from
catchment.models import Catchment, Site catchment = Catchment(“Sheila
Wheels”) PL23 = Site(“PL23”) catchment.add_site(PL23)
catchment.add_site(PL23) assert len(catchment.sites) == 1<br>
…</p>
<pre><code>
```python
# file: catchment/models.py
...
class Location:
    """A Location."""
    def __init__(self, name):
        self.name = name

    def __str__(self):
        return self.name

class Site(Location):
    """A measurement site in the study."""
    def __init__(self, name):
        super().__init__(name)
        self.measurements = {}

   def add_measurement(self, measurement_id, data, units=None):
       if measurement_id in self.measurements.keys():
           self.measurements[measurement_id].add_measurement(data)

       else:
            self.measurements[measurement_id] = MeasurementSeries(data, measurement_id, units)

   @property
   def last_measurements(self):
       return pd.concat(
           [self.measurements[key].series[-1:] for key in self.measurements.keys()],
           axis=1).sort_index()


class Catchment(Location):
    """A catchment area in the study."""
    def __init__(self, name):
        super().__init__(name)
        self.sites = {}


    def add_site(self, new_site):
        # Basic check to see if the site has already been added to the catchment area
        for site in self.sites:
            if site == new_site:
                print(f'{new_site} has already been added to site list')
                return

        self.sites[new_site.name] = Site(new_site)
...</code></pre>
</div>
</div>
</div>
</div>
<div id="geospatial-data" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="geospatial-data" class="callout-inner">
<h3 class="callout-title">Geospatial Data</h3>
<div class="callout-content">
<p>Once we have objects for both Sites and Catchments we can make use of
the Geopandas library and geospatial data for each Site and Catchment to
check the relationships between these. This is covered in the extra
episode on <a href="geopandas.html">Geospatial data with
Geopandas</a>.</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>Object oriented programming is a programming paradigm based on the
concept of classes, which encapsulate data and code.</li>
<li>Classes allow us to organise data into distinct concepts.</li>
<li>By breaking down our data into classes, we can reason about the
behaviour of parts of our data.</li>
<li>Relationships between concepts can be described using inheritance
(<em>is a</em>) and composition (<em>has a</em>).</li>
</ul></div>
</div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="34-functional-programming.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="36-architecture-revisited.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="34-functional-programming.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: 3.4 Functional
        </a>
        <a class="chapter-link float-end" href="36-architecture-revisited.html" rel="next">
          Next: 3.6 Architecture...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/python-intermediate-development-earth-sciences/edit/main/episodes/35-object-oriented-programming.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/python-intermediate-development-earth-sciences/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/python-intermediate-development-earth-sciences/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/python-intermediate-development-earth-sciences/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:info@software.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.10" class="external-link">sandpaper (0.16.10)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://carpentries-incubator.github.io/python-intermediate-development-earth-sciences/35-object-oriented-programming.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "3.5 Object Oriented Programming",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/python-intermediate-development-earth-sciences/35-object-oriented-programming.html",
  "identifier": "https://carpentries-incubator.github.io/python-intermediate-development-earth-sciences/35-object-oriented-programming.html",
  "dateCreated": "2020-04-23",
  "dateModified": "2024-11-25",
  "datePublished": "2024-12-24"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

